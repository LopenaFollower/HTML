<!DOCTYPE html>
<html>
	<head>
		<title>
			snake
		</title>
		<style>
			td{background-color:rgb(20,250,250);border-color:rgba(0,0,0,0);border-collapse:collapse;border-radius:
			2.5px;user-select:none;};button{color:rgb(200,100,130);user-select:none;font-size:50px;height:70px;width:70px;}
			li{text-align:left;align:center;opacity:0.5;overflow:hidden;}
			#grid,#back_grid{background-color:rgb(20,250,250);position:absolute;left:2.5px;top:40px;}
			#points{text-align:left;position:fixed;left:255px;top:5px;user-select:none;}
			#picker{font-size:20px;position:fixed;left:700px;top:37px;user-select:none;overflow:hidden;}
			#red{position:fixed;top:55px;left:620px;user-select:none;};.l{text-align:center}
			#green{position:fixed;top:55px;left:740px;user-select:none;}
			#blue{position:fixed;top:55px;left:860px;user-select:none;}
			#bugs{position:fixed;top:70px;left:610px;user-select:none;color:rgba(0,0,0,0.5);}
			#list{position:fixed;top:90px;left:600px;user-select:none;color:rgba(0,0,0,0.45);}
			mark{position:fixed;bottom:0px;background-color:gray;left:0px;z-index:921093120930;}
		</style>
	</head>
	<body bgcolor=#d4efd8>
		<center>
			<p id="points"></p>
			<table border="1px" id="grid">
				<tr><td id="1,1"></td><td id="1,2"></td><td id="1,3"></td><td id="1,4"></td><td id="1,5"></td><td id="1,6"></td><td id="1,7"></td><td id="1,8" class="l"></td><td id="1,9"></td><td id="1,10"></td><td id="1,11"></td><td id="1,12"></td><td id="1,13"></td><td id="1,14"></td><td id="1,15"></td></tr>
				<tr><td id="2,1"></td><td id="2,2"></td><td id="2,3"></td><td id="2,4"></td><td id="2,5"></td><td id="2,6"></td><td id="2,7"></td><td id="2,8" class="l"></td><td id="2,9"></td><td id="2,10"></td><td id="2,11"></td><td id="2,12"></td><td id="2,13"></td><td id="2,14"></td><td id="2,15"></td></tr>
				<tr><td id="3,1"></td><td id="3,2"></td><td id="3,3"></td><td id="3,4"></td><td id="3,5"></td><td id="3,6"></td><td id="3,7"></td><td id="3,8" class="l"></td><td id="3,9"></td><td id="3,10"></td><td id="3,11"></td><td id="3,12"></td><td id="3,13"></td><td id="3,14"></td><td id="3,15"></td></tr>
				<tr><td id="4,1"></td><td id="4,2"></td><td id="4,3"></td><td id="4,4"></td><td id="4,5"></td><td id="4,6"></td><td id="4,7"></td><td id="4,8" class="l"></td><td id="4,9"></td><td id="4,10"></td><td id="4,11"></td><td id="4,12"></td><td id="4,13"></td><td id="4,14"></td><td id="4,15"></td></tr>
				<tr><td id="5,1"></td><td id="5,2"></td><td id="5,3"></td><td id="5,4"></td><td id="5,5"></td><td id="5,6"></td><td id="5,7"></td><td id="5,8" class="l"></td><td id="5,9"></td><td id="5,10"></td><td id="5,11"></td><td id="5,12"></td><td id="5,13"></td><td id="5,14"></td><td id="5,15"></td></tr>
				<tr><td id="6,1"></td><td id="6,2"></td><td id="6,3"></td><td id="6,4"></td><td id="6,5"></td><td id="6,6"></td><td id="6,7"></td><td id="6,8" class="l"></td><td id="6,9"></td><td id="6,10"></td><td id="6,11"></td><td id="6,12"></td><td id="6,13"></td><td id="6,14"></td><td id="6,15"></td></tr>
				<tr><td id="7,1"></td><td id="7,2"></td><td id="7,3"></td><td id="7,4"></td><td id="7,5"></td><td id="7,6"></td><td id="7,7"></td><td id="7,8" class="l"></td><td id="7,9"></td><td id="7,10"></td><td id="7,11"></td><td id="7,12"></td><td id="7,13"></td><td id="7,14"></td><td id="7,15"></td></tr>
				<tr><td id="8,1"></td><td id="8,2"></td><td id="8,3"></td><td id="8,4"></td><td id="8,5"></td><td id="8,6"></td><td id="8,7"></td><td id="8,8" class="l"></td><td id="8,9"></td><td id="8,10"></td><td id="8,11"></td><td id="8,12"></td><td id="8,13"></td><td id="8,14"></td><td id="8,15"></td></tr>
				<tr><td id="9,1"></td><td id="9,2"></td><td id="9,3"></td><td id="9,4"></td><td id="9,5"></td><td id="9,6"></td><td id="9,7"></td><td id="9,8" class="l"></td><td id="9,9"></td><td id="9,10"></td><td id="9,11"></td><td id="9,12"></td><td id="9,13"></td><td id="9,14"></td><td id="9,15"></td></tr>
				<tr><td id="10,1"></td><td id="10,2"></td><td id="10,3"></td><td id="10,4"></td><td id="10,5"></td><td id="10,6"></td><td id="10,7"></td><td id="10,8"></td><td id="10,9"></td><td id="10,10"></td><td id="10,11"></td><td id="10,12"></td><td id="10,13"></td><td id="10,14"></td><td id="10,15"></td></tr>
				<tr><td id="11,1"></td><td id="11,2"></td><td id="11,3"></td><td id="11,4"></td><td id="11,5"></td><td id="11,6"></td><td id="11,7"></td><td id="11,8"></td><td id="11,9"></td><td id="11,10"></td><td id="11,11"></td><td id="11,12"></td><td id="11,13"></td><td id="11,14"></td><td id="11,15"></td></tr>
				<tr><td id="12,1"></td><td id="12,2"></td><td id="12,3"></td><td id="12,4"></td><td id="12,5"></td><td id="12,6"></td><td id="12,7"></td><td id="12,8"></td><td id="12,9"></td><td id="12,10"></td><td id="12,11"></td><td id="12,12"></td><td id="12,13"></td><td id="12,14"></td><td id="12,15"></td></tr>
				<tr><td id="13,1"></td><td id="13,2"></td><td id="13,3"></td><td id="13,4"></td><td id="13,5"></td><td id="13,6"></td><td id="13,7"></td><td id="13,8"></td><td id="13,9"></td><td id="13,10"></td><td id="13,11"></td><td id="13,12"></td><td id="13,13"></td><td id="13,14"></td><td id="13,15"></td></tr>
				<tr><td id="14,1"></td><td id="14,2"></td><td id="14,3"></td><td id="14,4"></td><td id="14,5"></td><td id="14,6"></td><td id="14,7"></td><td id="14,8"></td><td id="14,9"></td><td id="14,10"></td><td id="14,11"></td><td id="14,12"></td><td id="14,13"></td><td id="14,14"></td><td id="14,15"></td></tr>
				<tr><td id="15,1"></td><td id="15,2"></td><td id="15,3"></td><td id="15,4"></td><td id="15,5"></td><td id="15,6"></td><td id="15,7"></td><td id="15,8"></td><td id="15,9"></td><td id="15,10"></td><td id="15,11"></td><td id="15,12"></td><td id="15,13"></td><td id="15,14"></td><td id="15,15"></td></tr>
			</table>
			<div id="back_grid"><div id="picker">Red / Green / Blue</div>
			<input style="width:120px" id="red" type="range" min="0" max="255" value="0"><input style="width:120px" id="green" type="range" min="0" max="255" value="55"><input style="width:120px" id="blue" type="range" min="0" max="255" value="0"><div style='width:95%;height:20px;' id="sample"></div>
			<p id="bugs">Bugs:</p><ul id="list"><li>RGB is basically buggy</li></ul>
			<mark id=version>yes</mark>
		</center>
		<script>
w("version").innerText="build "+(605).toString(16);
const{floor}=Math,
	{log}=console,
	c9s="rgb(20, 250, 250)",
	m=255,
	f=![],
	t=!![],
	mult=1,
	speed=40,
	restric={"up":false,"down":false,"left":false,"right":false},
	index={
		1:"1,1",
		2:"1,2",
		3:"1,3",
		4:"1,4",
		5:"1,5",
		6:"1,6",
		7:"1,7",
		8:"1,8",
		9:"1,9",
		10:"1,10",
		11:"1,11",
		12:"1,12",
		13:"1,13",
		14:"1,14",
		15:"1,15",
		16:"2,1",
		17:"2,2",
		18:"2,3",
		19:"2,4",
		20:"2,5",
		21:"2,6",
		22:"2,7",
		23:"2,8",
		24:"2,9",
		25:"2,10",
		26:"2,11",
		27:"2,12",
		28:"2,13",
		29:"2,14",
		30:"2,15",
		31:"3,1",
		32:"3,2",
		33:"3,3",
		34:"3,4",
		35:"3,5",
		36:"3,6",
		37:"3,7",
		38:"3,8",
		39:"3,9",
		40:"3,10",
		41:"3,11",
		42:"3,12",
		43:"3,13",
		44:"3,14",
		45:"3,15",
		46:"4,1",
		47:"4,2",
		48:"4,3",
		49:"4,4",
		50:"4,5",
		51:"4,6",
		52:"4,7",
		53:"4,8",
		54:"4,9",
		55:"4,10",
		56:"4,11",
		57:"4,12",
		58:"4,13",
		59:"4,14",
		60:"4,15",
		61:"5,1",
		62:"5,2",
		63:"5,3",
		64:"5,4",
		65:"5,5",
		66:"5,6",
		67:"5,7",
		68:"5,8",
		69:"5,9",
		70:"5,10",
		71:"5,11",
		72:"5,12",
		73:"5,13",
		74:"5,14",
		75:"5,15",
		76:"6,1",
		77:"6,2",
		78:"6,3",
		79:"6,4",
		80:"6,5",
		81:"6,6",
		82:"6,7",
		83:"6,8",
		84:"6,9",
		85:"6,10",
		86:"6,11",
		87:"6,12",
		88:"6,13",
		89:"6,14",
		90:"6,15",
		91:"7,1",
		92:"7,2",
		93:"7,3",
		94:"7,4",
		95:"7,5",
		96:"7,6",
		97:"7,7",
		98:"7,8",
		99:"7,9",
		100:"7,10",
		101:"7,11",
		102:"7,12",
		103:"7,13",
		104:"7,14",
		105:"7,15",
		106:"8,1",
		107:"8,2",
		108:"8,3",
		109:"8,4",
		110:"8,5",
		111:"8,6",
		112:"8,7",
		113:"8,8",
		114:"8,9",
		115:"8,10",
		116:"8,11",
		117:"8,12",
		118:"8,13",
		119:"8,14",
		120:"8,15",
		121:"9,1",
		122:"9,2",
		123:"9,3",
		124:"9,4",
		125:"9,5",
		126:"9,6",
		127:"9,7",
		128:"9,8",
		129:"9,9",
		130:"9,10",
		131:"9,11",
		132:"9,12",
		133:"9,13",
		134:"9,14",
		135:"9,15",
		136:"10,1",
		137:"10,2",
		138:"10,3",
		139:"10,4",
		140:"10,5",
		141:"10,6",
		142:"10,7",
		143:"10,8",
		144:"10,9",
		145:"10,10",
		146:"10,11",
		147:"10,12",
		148:"10,13",
		149:"10,14",
		150:"10,15",
		151:"11,1",
		152:"11,2",
		153:"11,3",
		154:"11,4",
		155:"11,5",
		156:"11,6",
		157:"11,7",
		158:"11,8",
		159:"11,9",
		160:"11,10",
		161:"11,11",
		162:"11,12",
		163:"11,13",
		164:"11,14",
		165:"11,15",
		166:"12,1",
		167:"12,2",
		168:"12,3",
		169:"12,4",
		170:"12,5",
		171:"12,6",
		172:"12,7",
		173:"12,8",
		174:"12,9",
		175:"12,10",
		176:"12,11",
		177:"12,12",
		178:"12,13",
		179:"12,14",
		180:"12,15",
		181:"13,1",
		182:"13,2",
		183:"13,3",
		184:"13,4",
		185:"13,5",
		186:"13,6",
		187:"13,7",
		188:"13,8",
		189:"13,9",
		190:"13,10",
		191:"13,11",
		192:"13,12",
		193:"13,13",
		194:"13,14",
		195:"13,15",
		196:"14,1",
		197:"14,2",
		198:"14,3",
		199:"14,4",
		200:"14,5",
		201:"14,6",
		202:"14,7",
		203:"14,8",
		204:"14,9",
		205:"14,10",
		206:"14,11",
		207:"14,12",
		208:"14,13",
		209:"14,14",
		210:"14,15",
		211:"15,1",
		212:"15,2",
		213:"15,3",
		214:"15,4",
		215:"15,5",
		216:"15,6",
		217:"15,7",
		218:"15,8",
		219:"15,9",
		220:"15,10",
		221:"15,11",
		222:"15,12",
		223:"15,13",
		224:"15,14",
		225:"15,15"
	},
	len=(array)=>{
		return array.length
	};
var xdir=0,
	ydir=0,
	displayed_points=0,
	gstat,pointz=0,
	_=true,
	sp=spawn(),
	r=255,
	g=0,
	b=0,
	r_g=false,
	g_g=true,
	b_g=false,
	r_l=false,
	g_l=false,
	b_l=false,
	rgb=false,
	ap=apple(),
	head=[
		toNum(sp[0]),
		toNum(sp[1])
	],
	food=[
		toNum(ap[0]),
		toNum(ap[1])
	],
	memory_table=[];
function rand(){
	return Math.random()
};
function toNum(o){
	return parseInt(o)
};
function w(e){
	return document.getElementById(e);
};
function set(objec,val){
	objec.value=val
};
function apple(){
	var col=floor(rand()*15).toString(),
		row=floor(rand()*15).toString();
	try{
		var ___=0,interval=setInterval(()=>{
			___++
			if(w("grid").children[0].children[col].children[row].style.backgroundColor!=c9s){
				col=floor(rand()*15).toString();
				row=floor(rand()*15).toString();
			}else if(w("grid").children[0].children[col].children[row].style.backgroundColor==c9s){
				clearInterval(interval);
			}
		},0);
		w("grid").children[0].children[col].children[row].style.backgroundColor="#FF1100";
		return[col,row];
	}catch(e){}
};
function spawn(){
	gstat=1;
	var col=floor(rand()*(12-3)+3).toString(),
		row=floor(rand()*(12-3)+3).toString();
	w("grid").children[0].children[col].children[row].style.backgroundColor="black";
	w("grid").children[0].children[col].children[row].className="black";
	return[col,row];
};
setInterval(()=>{
	if(r==m&&g==0&&b==0){g_g=t};if(r==m&&g==m&&b==0){r_l=t};if(r==0&&g==m&&b==0){b_g=t};if(r==0&&g==m&&b==m){g_l=t};if(r==0&&g==0&&b==m){r_g=t};if(r==m&&g==0&&b==m){b_l=t};
	if(rgb){
		set(red,r);
		set(green,g);
		set(blue,b);
	}
},1);
setInterval(()=>{
	if(r>m){r_g=false;r=m};if(g>m){g_g=f;g=m};if(b>m){b_g=f;b=m};if(r<0){r_l=f;r=0};if(g<0){g_l=f;g=0};if(b<0){b_l=f;b=0};if(r_g){r+=mult};if(g_g){g+=mult};if(b_g){b+=mult};if(r_l){r-=mult};if(g_l){g-=mult};if(b_l){b-=mult};
},speed);
function reset(){
	gstat=0;
	for(let i=1;i<225;i++){
		w(index[i]).style.backgroundColor=c9s;
	};
	ydir=0;
	xdir=0;
	set(red,rand()*m);set(green,rand()*m);set(blue,rand()*m);
	memory_table=[],temp=[]
	sp=spawn();
	ap=apple();
	displayed_points=0;
	pointz=0;
	food=[toNum(ap[0]),toNum(ap[1])];
	head=[toNum(sp[0]),toNum(sp[1])];
};
setInterval(()=>{
	if(head[0]==15&&gstat==1){
		reset();
	};
	if(head[1]==15&&gstat==1){
		reset();
	};
	if(head[0]==-1&&gstat==1){
		reset();
	};
	if(head[1]==-1&&gstat==1){
		reset();
	}
},1);
if(true){
	grid.style.width="600px";
	grid.style.height="600px";
	back_grid.style.width="600px";
	back_grid.style.height="600px";
	back_grid.style.zIndex="-1";
}else{
	grid.style.width="500px";
	grid.style.height="500px";
	back_grid.style.width="500px";
	back_grid.style.height="500px";
	back_grid.style.zIndex="-1";
};
setInterval(()=>{
	picker.innerHTML="Red "+red.value+",Green "+green.value+",Blue "+blue.value;
	picker.style.color="rgb("+red.value+","+green.value+","+blue.value+")";
	if(ydir==1){
		restric["up"]=t;
		restric["down"]=f;
		restric["left"]=f;
		restric["right"]=f;
	};
	if(ydir==-1){
		restric["down"]=t;
		restric["up"]=f;
		restric["left"]=f;
		restric["right"]=f;
	};
	if(xdir==-1){
		restric["right"]=t;
		restric["up"]=f;
		restric["down"]=f;
		restric["left"]=f;
	};
	if(xdir==1){
		restric["left"]=t;
		restric["up"]=f;
		restric["down"]=f;
		restric["right"]=f;
	};
},1);
function move(req){
	if(pointz>=1){
		switch(req){
			case"left":
				if(restric.left==f){
					xdir=-1;
					ydir=0;
				};
			break;
			case"up":
				if(restric.up==f){
					xdir=0;
					ydir=-1;
				};
			break;
			case"down":
				if(restric.down==f){
					xdir=0;
					ydir=1;
				};
			break;
			case"right":
				if(restric.right==f){
					xdir=1;
					ydir=0;
				};
			break;
		}
	}else{
		switch(req){
			case"left":
				xdir=-1;
				ydir=0;
			break;
			case"up":
				xdir=0;
				ydir=-1;
			break;
			case"down":
				xdir=0;
				ydir=1;
			break;
			case"right":
				xdir=1;
				ydir=0;
			break;
		}
	}
};
document.addEventListener('keydown',e=>{
	if(e.keyCode==9){
		e.preventDefault()
	};
	if(_){
		switch(e.keyCode){
			case 37:
				move("left");
			break;
			case 65:
				move("left");
			break;
			case 38:
				move("up");
			break;
			case 87:
				move("up");
			break;
			case 40:
				move("down");
			break;
			case 83:
				move("down");
			break;
			case 39:
				move("right");
			break;
			case 68:
				move("right");
			break;
			case 80:
				rgb=!rgb
			break;
		}
		_=false
	}
});
function log_path(newMemory,temp=[]){
	memory_table.reverse()
	memory_table[memory_table.length]=newMemory
	return memory_table.reverse();
};
function game_start(){
	if(gstat==1){
		try{
			if(w("grid").children[0].children[head[0]+ydir].children[head[1]+xdir].style.backgroundColor=="rgb("+red.value+", "+green.value+", "+blue.value+")"){
				reset();
			}
		}catch(e){};
		head[0]=head[0]+ydir;
		head[1]=head[1]+xdir;
		if(pointz==0){
			try{
				w("grid").children[0].children[head[0]-ydir].children[head[1]-xdir].style.backgroundColor=c9s;
			}catch(e){};
		};
		try{
			w("grid").children[0].children[head[0]].children[head[1]].style.backgroundColor="black";
			_=true
		}catch(e){};
		if(pointz>=1){
			coords=log_path(((head[0]+1)-ydir).toString()+","+((head[1]+1)-xdir).toString());
			log(coords)
			try{
				w("grid").children[0].children[head[0]-ydir].children[head[1]-xdir].style.backgroundColor="rgb("+red.value+","+green.value+","+blue.value+")";
			}catch(e){};
		};
	};
	try{
		if(head[0]==food[0]&&head[1]==food[1]){
			pointz++;
			displayed_points=pointz;
			ap=apple();
			food=[toNum(ap[0]),toNum(ap[1])];
		}else{
			w("grid").children[0].children[food[0]].children[food[1]].style.backgroundColor="#FF1100";
		};
	}catch(e){};
	w("points").innerHTML=displayed_points+"<br>coords:"+toNum(food[0])+","+toNum(food[1]);
	setTimeout(()=>{
		game_start();
	},(350-(pointz>=50?50:pointz)*5));
};
game_start()
setInterval(()=>{
	try{
		for(let i=1;i<pointz+1;i+=1){
			if(pointz==i&&w(coords[i]).style.backgroundColor!="rgb(255, 17, 0)"){
				w(coords[i]).style.backgroundColor=c9s;
			};
		};
	}catch(e){};
},-1);
		</script>
	</body>
</html>
