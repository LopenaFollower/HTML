<!DOCTYPE html>
<html>
	<head>
		<title>canvas test</title>
		<style>
			
		</style>
	</head>
	<body>
		<canvas id=canvas width=340 height=400></canvas>
		<script>
let ctx=canvas.getContext("2d");
let total=0;
let ca=0;
function randhex(){
	let res=""
	for(let i=0;i<Math.floor(Math.random()*256)*10;i++){
		res="#"+Math.floor(Math.random()*256).toString(16)+Math.floor(Math.random()*256).toString(16)+Math.floor(Math.random()*256).toString(16)
	}
	return res
}
let dist=25
var items={
	"0":[0,"#eff",0],
	"1":[0,"#fee",1*dist],
	"2":[0,"#fdd",2*dist],
	"3":[0,"#fcc",3*dist],
	"4":[0,"#fbb",4*dist],
	"5":[0,"#faa",5*dist],
	"6":[0,"#f99",6*dist],
	"7":[0,"#f77",7*dist],
	"8":[0,"#f66",8*dist],
	"9":[0,"#f44",9*dist],
	".":[0,"#f22",10*dist]
};
function sum(o){
  return Object.keys(o).reduce((s,k)=>s+parseFloat(o[k]||0),0);
}
setInterval(function extract(){
	let a=Math.random().toString()
	let b=a.length
	for(let c=0;c<b;c++){
		items[a[c]][0]+=1
	}
	total=sum(items)
	ctx.clearRect(0,0,canvas.height,canvas.width);
	Object.keys(items).forEach(e=>{
		let portionAngle = (items[e][0] / total) * 2 * Math.PI;
		ctx.beginPath();
		ctx.arc(100,100,100,ca,ca+portionAngle);
		ca+=portionAngle;
		ctx.lineTo(100,100);
		ctx.rect(220,items[e][2],dist/2,dist/2);
		ctx.fillStyle = "#000";
		ctx.fill();
		ctx.font="15px monospace";
		ctx.fillText(e+"("+Math.round(items[e][0]/total*1000000)/10000+")%",235,items[e][2]+(25/2));
		ctx.fillStyle = items[e][1];
		ctx.fill();
	})
})
		</script>
	</body>
</html>