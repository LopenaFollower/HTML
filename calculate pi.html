<!DOCTYPE html>
<html>
	<head>
		<title>k</title>
		<style>
			*{
				color:#fff;
				background-color:#0e0e0e;
			}
			#res{
				word-wrap:break-word;
				font:900 20px monospace;
			}
			.von{
				position:fixed;
				bottom:0;
			}
		</style>
	</head>
	<body onbeforeunload="save()">
		<button onclick="save()">download</button><div id=len></div><br>
		<script>
if(!localStorage.getItem("pi_formula")){
	localStorage.setItem("pi_formula","60,13440,10080,3")
}
if(!localStorage.getItem("pi")){
	localStorage.setItem("pi","3.")
}
let stored=localStorage.getItem("pi_formula").split(",")
var q=BigInt(stored[0]),
	r=BigInt(stored[1]),
	t=BigInt(stored[2]),
	i=BigInt(stored[3]);
function calc_pi(){
	u=3n*i;
	u=6n+3n*u**2n+u*9n;
	d=(27n*q*i+5n*r-12n*q)/(t*5n);
	r=10n*u*(r+(5n*i-2n)*q-d*t);
	t*=u;
	q*=i*10n*(2n*i++-1n);
	localStorage.setItem("pi_formula",q.toString()+","+r.toString()+","+t.toString()+","+i.toString())
	return Number(d)
}
setInterval(()=>{
	for(let index=0;index<5;index++)localStorage.setItem("pi",localStorage.getItem("pi")+calc_pi());
})
setInterval(()=>{
	len.innerText=localStorage.getItem("pi").length
},5e3)
function save(){
	let link=document.createElement("a");
	let pi=localStorage.getItem("pi")
	link.href=URL.createObjectURL(new Blob([pi],{type:"text/plain"}));
	link.download=pi.length.toLocaleString()+" chars of pi.txt";
	link.click();
	URL.revokeObjectURL(link.href);
}
		</script>
	</body>
</html>