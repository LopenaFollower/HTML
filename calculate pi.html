<!DOCTYPE html>
<html>
	<head>
		<title>k</title>
		<style>
			*{
				color:#fff;
				background-color:#0e0e0e;
			}
			#res{
				word-wrap:break-word;
				font:900 20px monospace;
			}
			.von{
				position:fixed;
				bottom:0;
			}
		</style>
	</head>
	<body onbeforeunload="save()">
		<button onclick='save()'>download</button><div id=len></div><br>
		<div id=res></div>
		<script>
/*
calculated using the Spigot Algorithms
http://www.cs.ox.ac.uk/jeremy.gibbons/publications/spigot.pdf*/
function*calc_pi(q,r,t,i,d){
	for(;;){
		u=3n*i,u=6n+3n*u**2n+u*9n,d=(27n*q*i+5n*r-12n*q)/(t*5n),yield Number(d),r=10n*u*(r+(5n*i-2n)*q-d*t),t*=u,q*=i*10n*(2n*i++-1n);
	}
}
var pi="3.",sequence=calc_pi(60n,13440n,10080n,3n,3n),i=parseInt(localStorage.getItem("pi-index"))||0;
setInterval(()=>{
	for(let i=0;i<25;i++)pi+=sequence.next().value;
})
function save(){
	let link=document.createElement("a");
	link.href=URL.createObjectURL(new Blob([pi],{type:'text/plain'}));
	link.download=pi.length.toLocaleString()+" chars of pi.txt";
	link.click();
	URL.revokeObjectURL(link.href);
}
		</script>
	</body>
</html>