<!DOCTYPE html>
<html>
	<head>
		<title>game(2nd remake)</title>
		<style>
			#base{
				table-layout:fixed;
				height:fit-content;
				position:relative;
				width:fit-content;
				top:70px;
			}
			.row>td,#next{
				transition-timing-function:linear;
				transition-duration:.1s;
				border:1px solid grey;
				text-overflow:clip;
				text-align:center;
				line-height:53px;
				user-select:none;
				height:max(57px);
				width:max(57px);
				font-size:20px;
				color:white;
			}
			p{
				user-select:none;
				color:white;
			}
			.dh{
				color:red;
				transform:rotate(365deg);
			}
		</style>
	</head>
	<body bgcolor=#383838>
		<center>
			<p>Next:</p>
			<div id="next"></div>
			<table id="base">
				<tr class=row>
					<td onclick="p(this.id)" id="7,1"></td>
					<td onclick="p(this.id)" id="7,2"></td>
					<td onclick="p(this.id)" id="7,3"></td>
					<td onclick="p(this.id)" id="7,4"></td>
					<td onclick="p(this.id)" id="7,5"></td>
				</tr>
				<tr class=row>
					<td onclick="p(this.id)" id="6,1"></td>
					<td onclick="p(this.id)" id="6,2"></td>
					<td onclick="p(this.id)" id="6,3"></td>
					<td onclick="p(this.id)" id="6,4"></td>
					<td onclick="p(this.id)" id="6,5"></td>
				</tr>
				<tr class=row>
					<td onclick="p(this.id)" id="5,1"></td>
					<td onclick="p(this.id)" id="5,2"></td>
					<td onclick="p(this.id)" id="5,3"></td>
					<td onclick="p(this.id)" id="5,4"></td>
					<td onclick="p(this.id)" id="5,5"></td>
				</tr>
				<tr class=row>
					<td onclick="p(this.id)" id="4,1"></td>
					<td onclick="p(this.id)" id="4,2"></td>
					<td onclick="p(this.id)" id="4,3"></td>
					<td onclick="p(this.id)" id="4,4"></td>
					<td onclick="p(this.id)" id="4,5"></td>
				</tr>
				<tr class=row>
					<td onclick="p(this.id)" id="3,1"></td>
					<td onclick="p(this.id)" id="3,2"></td>
					<td onclick="p(this.id)" id="3,3">32</td>
					<td onclick="p(this.id)" id="3,4"></td>
					<td onclick="p(this.id)" id="3,5"></td>
				</tr>
				<tr class=row>
					<td onclick="p(this.id)" id="2,1"></td>
					<td onclick="p(this.id)" id="2,2"></td>
					<td onclick="p(this.id)" id="2,3">64</td>
					<td onclick="p(this.id)" id="2,4"></td>
					<td onclick="p(this.id)" id="2,5"></td>
				</tr>
				<tr class=row>
					<td onclick="p(this.id)" id="1,1"></td>
					<td onclick="p(this.id)" id="1,2">256</td>
					<td onclick="p(this.id)" id="1,3">128</td>
					<td onclick="p(this.id)" id="1,4">256</td>
					<td onclick="p(this.id)" id="1,5"></td>
				</tr>
			</table>
			<br><br><br><br>
			<table>
				<tr>
					<td><input id=c placeholder="sparate with ';'" oninput="highlight(this.value)"/></td>
					<td><button onclick="rem($('c').value);$('c').value=''">clear</button></td>
				</tr>
				<tr>
					<td><input id=n oninput="next_p(this.value)"onload='this.value=2**(Math.round(Math.random()*49)+5)'/></td>
					<td><button onclick="next_p($('n').value)">force</button></td>
				</tr>
			</table>
		</center>
		<script>
//variables
const rgb={
	step:1,
	r:255,
	g:0,
	b:0,
	rg:false,
	gg:true,
	bg:false,
	rl:false,
	gl:false,
	bl:false,
	fetch:function(f){
		if(!f)return"rgb("+this.r+","+this.g+","+this.b+")";
		if(f.length==3){
			return"rgb("+this[f[0]]+","+this[f[1]]+","+this[f[2]]+")";
		}
	}
},
	{floor}=Math,
	{abs}=Math,
	rand=Math.random,
	{log}=console,
	delay=setTimeout,
	cd=150,
	BGC="background-color",
	IT="innerText",
	contrast=150,
scheme={
	"":"rgba(0,0,0,0)",
	"16":"#D22A77",
	"32":"#f00",
	"64":"#0ef",
	"128":"#808080",
	"256":"#fa0",
	"512":"#a5c710",
	"1024":"#6517bf",
	"2048":"#754f23",
	"4096":"#ffd",
	"8192":"#93d9c7",
	"16384":"#474747",
	"32768":"#888",
	"65536":"#afbdb7",
	"131072":"#B3C77A",
	"262144":"#FF00E4",
	"524288":"#FB0",
	"1048576":"#F8FF00",
	"2097152":"#7A001E",
	"4194304":"#85FFD6",
	"8388608":"#C4BC34",
	"16777216":"#000C6A",
	"33554432":"#FD9CFF",
	"67108864":"#59CAFF",
	"134217728":"#156F36",
	"268435456":"#FF9B62",
	"536870912":"#DA9B5E",
	"1073741824":"#D6E300",
	"2147483648":"#7A687F",
	"4294967296":"ff0",
	"8589934592":"#0f0",
	"17179869184":"0ff",
	"34359738368":"#00f",
	"68719476736":"#fff",
	"137438953472":"#eee",
	"274877906944":"#ddd",
	"549755813888":"#ccc",
	"1099511627776":"#bbb",
	"2199023255552":"#aaa",
	"4398046511104":"#999",
	"8796093022208":"#888",
	"17592186044416":"#777",
	"35184372088832":"#666",
	"70368744177664":"#555",
	"140737488355328":"#444",
	"281474976710656":"#333",
	"562949953421312":"#222",
	"1125899906842624":"#111",
	"2251799813685248":"#000"
}
var graph_map={
	c1:{c:0,h:null},
	c2:{c:0,h:null},
	c3:{c:0,h:null},
	c4:{c:0,h:null},
	c5:{c:0,h:null}
},recent_row=null;
//functions
function $(n){
	return document.getElementById(n)
}
function p(id){
	if($("next")[IT]==="")return;
	try{
		let x=id.split(",")[1],
			y=id.split(",")[0],
			pid=highest(x)?highest(x)[0].num()+1+","+x:"1,"+x
		$(pid)[IT]=BigInt($("next")[IT]);
		recent_row=x.num();
		$("next")[IT]="";
		delay(next_p,cd)
	}catch(ñ){
		reset()
	}
}
function highlight(cs){
	Array.from(document.getElementsByClassName("dh")).forEach(e=>{
		e.className=""
	})
	cs=cs.split(";");
	for(let i=0;cs.length>i;i++){
		try{
			$(cs[i]).className="dh"
		}catch(e){}
	}
}
function rem(cs){
	if(cs=="all")reset()
	cs=cs.split(";");
	for(let i=0;cs.length>i;i++){
		try{
			$(cs[i])[IT]=""
			$(cs[i]).className=""
		}catch(e){}
	}
}
function are(...a){
	let l=a.length
	for(let i=1;i<l;i++){
		if(!(a[i]===a[0])){
			return false
		}
	}
	return true
}
function highest(col){
	for(let i=7;i>0;i--){
		if($(i+","+col)[IT].length>0){
			return(i+","+col)
		}
	}
	return null		
}
function reset(){
	for(let i=1;i<=7;i++){
		for(let v=1;v<=5;v++){
				$(i+","+v)[IT]=""
		}
	}
	next_p()
}
function next_p(forced){
	recent_row=undefined;
	try{if(forced)forced=eval("BigInt("+forced+")")+""}catch(e){};
	$("next")[IT]=forced?forced:[32,64,128].random();
}
function combine(row){
	delay(()=>{
	if(are($("7,1")[IT],$("6,2")[IT],$("7,3")[IT],$("7,2")[IT])&&$("7,2")[IT]!==""){
		$("7,1")[IT]="";
		$("7,3")[IT]="";
		$("7,2")[IT]="";
		$("6,2").bigInt(8);
	}
	if(are($("7,2")[IT],$("6,3")[IT],$("7,4")[IT],$("7,3")[IT])&&$("7,3")[IT]!==""){
		$("7,2")[IT]="";
		$("7,3")[IT]="";
		$("7,4")[IT]="";
		$("6,3").bigInt(8);
	}
	if(are($("7,3")[IT],$("6,4")[IT],$("7,5")[IT],$("7,4")[IT])&&$("7,4")[IT]!==""){
		$("7,5")[IT]="";
		$("7,3")[IT]="";
		$("7,4")[IT]="";
		$("6,4").bigInt(8);
	}
	if(are($("6,1")[IT],$("5,2")[IT],$("6,3")[IT],$("6,2")[IT])&&$("6,2")[IT]!==""){
		$("6,1")[IT]="";
		$("6,3")[IT]="";
		$("6,2")[IT]="";
		$("5,2").bigInt(8);
	}
	if(are($("6,2")[IT],$("5,3")[IT],$("6,4")[IT],$("6,3")[IT])&&$("6,3")[IT]!==""){
		$("6,2")[IT]="";
		$("6,3")[IT]="";
		$("6,4")[IT]="";
		$("5,3").bigInt(8);
	}
	if(are($("6,3")[IT],$("5,4")[IT],$("6,5")[IT],$("6,4")[IT])&&$("6,4")[IT]!==""){
		$("6,3")[IT]="";
		$("6,4")[IT]="";
		$("6,5")[IT]="";
		$("5,4").bigInt(8);
	}
	if(are($("5,1")[IT],$("4,2")[IT],$("5,3")[IT],$("5,2")[IT])&&$("5,2")[IT]!==""){
		$("5,1")[IT]="";
		$("5,3")[IT]="";
		$("5,2")[IT]="";
		$("4,2").bigInt(8);
	}
	if(are($("5,2")[IT],$("4,3")[IT],$("5,4")[IT],$("5,3")[IT])&&$("5,3")[IT]!==""){
		$("5,2")[IT]="";
		$("5,3")[IT]="";
		$("5,4")[IT]="";
		$("4,3").bigInt(8);
	}
	if(are($("5,3")[IT],$("4,4")[IT],$("5,5")[IT],$("5,4")[IT])&&$("5,4")[IT]!==""){
		$("5,4")[IT]="";
		$("5,3")[IT]="";
		$("5,5")[IT]="";
		$("4,4").bigInt(8);
	}
	if(are($("4,1")[IT],$("3,2")[IT],$("4,3")[IT],$("4,2")[IT])&&$("4,2")[IT]!==""){
		$("4,1")[IT]="";
		$("4,3")[IT]="";
		$("4,2")[IT]="";
		$("3,2").bigInt(8);
	}
	if(are($("4,2")[IT],$("3,3")[IT],$("4,4")[IT],$("4,3")[IT])&&$("4,3")[IT]!==""){
		$("4,2")[IT]="";
		$("4,3")[IT]="";
		$("4,4")[IT]="";
		$("3,3").bigInt(8);
	}
	if(are($("4,3")[IT],$("3,4")[IT],$("4,5")[IT],$("4,4")[IT])&&$("4,4")[IT]!==""){
		$("4,4")[IT]="";
		$("4,3")[IT]="";
		$("4,5")[IT]="";
		$("3,4").bigInt(8);
	}
	if(are($("3,1")[IT],$("2,2")[IT],$("3,3")[IT],$("3,2")[IT])&&$("3,2")[IT]!==""){
		$("3,1")[IT]="";
		$("3,3")[IT]="";
		$("3,2")[IT]="";
		$("2,2").bigInt(8);
	}
	if(are($("3,2")[IT],$("2,3")[IT],$("3,4")[IT],$("3,3")[IT])&&$("3,3")[IT]!==""){
		$("3,4")[IT]="";
		$("3,3")[IT]="";
		$("3,2")[IT]="";
		$("2,3").bigInt(8);
	}
	if(are($("3,3")[IT],$("2,4")[IT],$("3,5")[IT],$("3,4")[IT])&&$("3,4")[IT]!==""){
		$("3,4")[IT]="";
		$("3,3")[IT]="";
		$("3,5")[IT]="";
		$("2,4").bigInt(8);
	}
	if(are($("2,1")[IT],$("1,2")[IT],$("2,3")[IT],$("2,2")[IT])&&$("2,2")[IT]!==""){
		$("2,1")[IT]="";
		$("2,3")[IT]="";
		$("2,2")[IT]="";
		$("1,2").bigInt(8);
	}
	if(are($("2,2")[IT],$("1,3")[IT],$("2,4")[IT],$("2,3")[IT])&&$("2,3")[IT]!==""){
		$("2,4")[IT]="";
		$("2,3")[IT]="";
		$("2,2")[IT]="";
		$("1,3").bigInt(8);
	}
	if(are($("2,3")[IT],$("1,4")[IT],$("2,5")[IT],$("2,4")[IT])&&$("2,4")[IT]!==""){
		$("2,4")[IT]="";
		$("2,3")[IT]="";
		$("2,5")[IT]="";
		$("1,4").bigInt(8);
	}
	if(are($("7,1")[IT],$("7,2")[IT],$("6,2")[IT])&&$("6,2")[IT]!==""){
		$("7,1")[IT]="";
		$("7,2")[IT]="";
		$("6,2").bigInt(4);
	}
	if(are($("7,2")[IT],$("7,3")[IT],$("6,3")[IT])&&$("6,3")[IT]!==""){
		$("7,2")[IT]="";
		$("7,3")[IT]="";
		$("6,3").bigInt(4);
	}
	if(are($("7,3")[IT],$("7,4")[IT],$("6,4")[IT])&&$("6,4")[IT]!==""){
		$("7,3")[IT]="";
		$("7,4")[IT]="";
		$("6,4").bigInt(4);
	}
	if(are($("7,4")[IT],$("7,5")[IT],$("6,5")[IT])&&$("6,5")[IT]!==""){
		$("7,4")[IT]="";
		$("7,5")[IT]="";
		$("6,5").bigInt(4);
	}
	
	if(are($("6,1")[IT],$("6,2")[IT],$("5,2")[IT])&&$("5,2")[IT]!==""){
		$("6,1")[IT]="";
		$("6,2")[IT]="";
		$("5,2").bigInt(4);
	}
	if(are($("6,2")[IT],$("6,3")[IT],$("5,3")[IT])&&$("5,3")[IT]!==""){
		$("6,2")[IT]="";
		$("6,3")[IT]="";
		$("5,3").bigInt(4);
	}
	if(are($("6,3")[IT],$("6,4")[IT],$("5,4")[IT])&&$("5,4")[IT]!==""){
		$("6,3")[IT]="";
		$("6,4")[IT]="";
		$("5,4").bigInt(4);
	}
	if(are($("6,4")[IT],$("6,5")[IT],$("5,5")[IT])&&$("5,5")[IT]!==""){
		$("6,4")[IT]="";
		$("6,5")[IT]="";
		$("5,5").bigInt(4);
	}
	
	if(are($("5,1")[IT],$("5,2")[IT],$("4,2")[IT])&&$("4,2")[IT]!==""){
		$("5,1")[IT]="";
		$("5,2")[IT]="";
		$("4,2").bigInt(4);
	}
	if(are($("5,2")[IT],$("5,3")[IT],$("4,3")[IT])&&$("4,3")[IT]!==""){
		$("5,2")[IT]="";
		$("5,3")[IT]="";
		$("4,3").bigInt(4);
	}
	if(are($("5,3")[IT],$("5,4")[IT],$("4,4")[IT])&&$("4,4")[IT]!==""){
		$("5,3")[IT]="";
		$("5,4")[IT]="";
		$("4,4").bigInt(4);
	}
	if(are($("5,4")[IT],$("5,5")[IT],$("4,5")[IT])&&$("4,5")[IT]!==""){
		$("5,4")[IT]="";
		$("5,5")[IT]="";
		$("4,5").bigInt(4);
	}
	
	if(are($("4,1")[IT],$("4,2")[IT],$("3,2")[IT])&&$("3,2")[IT]!==""){
		$("4,1")[IT]="";
		$("4,2")[IT]="";
		$("3,2").bigInt(4);
	}
	if(are($("4,2")[IT],$("4,3")[IT],$("3,3")[IT])&&$("3,3")[IT]!==""){
		$("4,2")[IT]="";
		$("4,3")[IT]="";
		$("3,3").bigInt(4);
	}
	if(are($("4,3")[IT],$("4,4")[IT],$("3,4")[IT])&&$("3,4")[IT]!==""){
		$("4,3")[IT]="";
		$("4,4")[IT]="";
		$("3,4").bigInt(4);
	}
	if(are($("4,4")[IT],$("4,5")[IT],$("3,5")[IT])&&$("3,5")[IT]!==""){
		$("4,4")[IT]="";
		$("4,5")[IT]="";
		$("3,5").bigInt(4);
	}
	if(are($("3,1")[IT],$("3,2")[IT],$("2,2")[IT])&&$("2,2")[IT]!==""){
		$("3,1")[IT]="";
		$("3,2")[IT]="";
		$("2,2").bigInt(4);
	}
	if(are($("3,2")[IT],$("3,3")[IT],$("2,3")[IT])&&$("2,3")[IT]!==""){
		$("3,2")[IT]="";
		$("3,3")[IT]="";
		$("2,3").bigInt(4);
	}
	if(are($("3,3")[IT],$("3,4")[IT],$("2,4")[IT])&&$("2,4")[IT]!==""){
		$("3,3")[IT]="";
		$("3,4")[IT]="";
		$("2,4").bigInt(4);
	}
	if(are($("3,4")[IT],$("3,5")[IT],$("2,5")[IT])&&$("2,5")[IT]!==""){
		$("3,4")[IT]="";
		$("3,5")[IT]="";
		$("2,5").bigInt(4);
	}
	if(are($("2,1")[IT],$("2,2")[IT],$("1,2")[IT])&&$("1,2")[IT]!==""){
		$("2,1")[IT]="";
		$("2,2")[IT]="";
		$("1,2").bigInt(4);
	}
	if(are($("2,2")[IT],$("2,3")[IT],$("1,3")[IT])&&$("1,3")[IT]!==""){
		$("2,2")[IT]="";
		$("2,3")[IT]="";
		$("1,3").bigInt(4);
	}
	if(are($("2,3")[IT],$("2,4")[IT],$("1,4")[IT])&&$("1,4")[IT]!==""){
		$("2,3")[IT]="";
		$("2,4")[IT]="";
		$("1,4").bigInt(4);
	}
	if(are($("2,4")[IT],$("2,5")[IT],$("1,5")[IT])&&$("1,5")[IT]!==""){
		$("2,4")[IT]="";
		$("2,5")[IT]="";
		$("1,5").bigInt(4);
	}
	if(are($("7,1")[IT],$("7,2")[IT],$("6,1")[IT])&&$("6,1")[IT]!==""){
		$("7,1")[IT]="";
		$("7,2")[IT]="";
		$("6,1").bigInt(4);
	}
	if(are($("7,2")[IT],$("7,3")[IT],$("6,2")[IT])&&$("6,2")[IT]!==""){
		$("7,2")[IT]="";
		$("7,3")[IT]="";
		$("6,2").bigInt(4);
	}
	if(are($("7,3")[IT],$("7,4")[IT],$("6,3")[IT])&&$("6,3")[IT]!==""){
		$("7,3")[IT]="";
		$("7,4")[IT]="";
		$("6,3").bigInt(4);
	}
	if(are($("7,4")[IT],$("7,5")[IT],$("6,4")[IT])&&$("6,4")[IT]!==""){
		$("7,4")[IT]="";
		$("7,5")[IT]="";
		$("6,4").bigInt(4);
	}
	if(are($("6,1")[IT],$("6,2")[IT],$("5,1")[IT])&&$("5,1")[IT]!==""){
		$("6,1")[IT]="";
		$("6,2")[IT]="";
		$("5,1").bigInt(4);
	}
	if(are($("6,2")[IT],$("6,3")[IT],$("5,2")[IT])&&$("5,2")[IT]!==""){
		$("6,2")[IT]="";
		$("6,3")[IT]="";
		$("5,2").bigInt(4);
	}
	if(are($("6,3")[IT],$("6,4")[IT],$("5,3")[IT])&&$("5,3")[IT]!==""){
		$("6,3")[IT]="";
		$("6,4")[IT]="";
		$("5,3").bigInt(4);
	}
	if(are($("6,4")[IT],$("6,5")[IT],$("5,4")[IT])&&$("5,4")[IT]!==""){
		$("6,4")[IT]="";
		$("6,5")[IT]="";
		$("5,4").bigInt(4);
	}
	if(are($("5,1")[IT],$("5,2")[IT],$("4,1")[IT])&&$("4,1")[IT]!==""){
		$("5,1")[IT]="";
		$("5,2")[IT]="";
		$("4,1").bigInt(4);
	}
	if(are($("5,2")[IT],$("5,3")[IT],$("4,2")[IT])&&$("4,2")[IT]!==""){
		$("5,2")[IT]="";
		$("5,3")[IT]="";
		$("4,2").bigInt(4);
	}
	if(are($("5,3")[IT],$("5,4")[IT],$("4,3")[IT])&&$("4,3")[IT]!==""){
		$("5,3")[IT]="";
		$("5,4")[IT]="";
		$("4,3").bigInt(4);
	}
	if(are($("5,4")[IT],$("5,5")[IT],$("4,4")[IT])&&$("4,4")[IT]!==""){
		$("5,4")[IT]="";
		$("5,5")[IT]="";
		$("4,4").bigInt(4);
	}
	if(are($("4,1")[IT],$("4,2")[IT],$("3,1")[IT])&&$("3,1")[IT]!==""){
		$("4,1")[IT]="";
		$("4,2")[IT]="";
		$("3,1").bigInt(4);
	}
	if(are($("4,2")[IT],$("4,3")[IT],$("3,2")[IT])&&$("3,2")[IT]!==""){
		$("4,2")[IT]="";
		$("4,3")[IT]="";
		$("3,2").bigInt(4);
	}
	if(are($("4,3")[IT],$("4,4")[IT],$("3,3")[IT])&&$("3,3")[IT]!==""){
		$("4,3")[IT]="";
		$("4,4")[IT]="";
		$("3,3").bigInt(4);
	}
	if(are($("4,4")[IT],$("4,5")[IT],$("3,4")[IT])&&$("3,4")[IT]!==""){
		$("4,4")[IT]="";
		$("4,5")[IT]="";
		$("3,4").bigInt(4);
	}
	if(are($("3,1")[IT],$("3,2")[IT],$("2,1")[IT])&&$("2,1")[IT]!==""){
		$("3,1")[IT]="";
		$("3,2")[IT]="";
		$("2,1").bigInt(4);
	}
	if(are($("3,2")[IT],$("3,3")[IT],$("2,2")[IT])&&$("2,2")[IT]!==""){
		$("3,2")[IT]="";
		$("3,3")[IT]="";
		$("2,2").bigInt(4);
	}
	if(are($("3,3")[IT],$("3,4")[IT],$("2,3")[IT])&&$("2,3")[IT]!==""){
		$("3,3")[IT]="";
		$("3,4")[IT]="";
		$("2,3").bigInt(4);
	}
	if(are($("3,4")[IT],$("3,5")[IT],$("2,4")[IT])&&$("2,4")[IT]!==""){
		$("3,4")[IT]="";
		$("3,5")[IT]="";
		$("2,4").bigInt(4);
	}
	if(are($("2,1")[IT],$("2,2")[IT],$("1,1")[IT])&&$("1,1")[IT]!==""){
		$("2,1")[IT]="";
		$("2,2")[IT]="";
		$("1,1").bigInt(4);
	}
	if(are($("2,2")[IT],$("2,3")[IT],$("1,2")[IT])&&$("1,2")[IT]!==""){
		$("2,2")[IT]="";
		$("2,3")[IT]="";
		$("1,2").bigInt(4);
	}
	if(are($("2,3")[IT],$("2,4")[IT],$("1,3")[IT])&&$("1,3")[IT]!==""){
		$("2,3")[IT]="";
		$("2,4")[IT]="";
		$("1,3").bigInt(4);
	}
	if(are($("2,4")[IT],$("2,5")[IT],$("1,4")[IT])&&$("1,4")[IT]!==""){
		$("2,4")[IT]="";
		$("2,5")[IT]="";
		$("1,4").bigInt(4);
	}
	try{
		if(are($("7,"+row)[IT],$("7,"+(row+1))[IT],$("7,"+(row-1))[IT])&&$("7,"+(row+1))[IT]!==""){
			$("7,"+(row+1))[IT]="";
			$("7,"+(row-1))[IT]="";
			$("7,"+row).bigInt(4);
		}
		if(are($("6,"+row)[IT],$("6,"+(row+1))[IT],$("6,"+(row-1))[IT])&&$("6,"+(row+1))[IT]!==""){
			$("6,"+(row+1))[IT]="";
			$("6,"+(row-1))[IT]="";
			$("6,"+row).bigInt(4);
		}
		if(are($("5,"+row)[IT],$("5,"+(row+1))[IT],$("5,"+(row-1))[IT])&&$("5,"+(row+1))[IT]!==""){
			$("5,"+(row+1))[IT]="";
			$("5,"+(row-1))[IT]="";
			$("5,"+row).bigInt(4);
		}
		if(are($("4,"+row)[IT],$("4,"+(row+1))[IT],$("4,"+(row-1))[IT])&&$("4,"+(row+1))[IT]!==""){
			$("4,"+(row+1))[IT]="";
			$("4,"+(row-1))[IT]="";
			$("4,"+row).bigInt(4);
		}
		if(are($("3,"+row)[IT],$("3,"+(row+1))[IT],$("3,"+(row-1))[IT])&&$("3,"+(row+1))[IT]!==""){
			$("3,"+(row+1))[IT]="";
			$("3,"+(row-1))[IT]="";
			$("3,"+row).bigInt(4);
		}
		if(are($("2,"+row)[IT],$("2,"+(row+1))[IT],$("2,"+(row-1))[IT])&&$("2,"+(row+1))[IT]!==""){
			$("2,"+(row+1))[IT]="";
			$("2,"+(row-1))[IT]="";
			$("2,"+row).bigInt(4);
		}
		if(are($("1,"+row)[IT],$("1,"+(row+1))[IT],$("1,"+(row-1))[IT])&&$("1,"+(row+1))[IT]!==""){
			$("1,"+(row+1))[IT]="";
			$("1,"+(row-1))[IT]="";
			$("1,"+row).bigInt(4);
		}
	}catch(e){}
	if(are($("2,1")[IT],$("1,1")[IT])&&$("1,1")[IT]!==""){
		$("2,1")[IT]="";
		$("1,1").bigInt(2);
	}
	if(are($("2,2")[IT],$("1,2")[IT])&&$("1,2")[IT]!==""){
		$("2,2")[IT]="";
		$("1,2").bigInt(2);
	}
	if(are($("2,3")[IT],$("1,3")[IT])&&$("1,3")[IT]!==""){
		$("2,3")[IT]="";
		$("1,3").bigInt(2);
	}
	if(are($("2,4")[IT],$("1,4")[IT])&&$("1,4")[IT]!==""){
		$("2,4")[IT]="";
		$("1,4").bigInt(2);
	}
	if(are($("2,5")[IT],$("1,5")[IT])&&$("1,5")[IT]!==""){
		$("2,5")[IT]="";
		$("1,5").bigInt(2);
	}
	if(are($("3,1")[IT],$("2,1")[IT])&&$("2,1")[IT]!==""){
		$("3,1")[IT]="";
		$("2,1").bigInt(2);
	}
	if(are($("3,2")[IT],$("2,2")[IT])&&$("2,2")[IT]!==""){
		$("3,2")[IT]="";
		$("2,2").bigInt(2);
	}
	if(are($("3,3")[IT],$("2,3")[IT])&&$("2,3")[IT]!==""){
		$("3,3")[IT]="";
		$("2,3").bigInt(2);
	}
	if(are($("3,4")[IT],$("2,4")[IT])&&$("2,4")[IT]!==""){
		$("3,4")[IT]="";
		$("2,4").bigInt(2);
	}
	if(are($("3,5")[IT],$("2,5")[IT])&&$("2,5")[IT]!==""){
		$("3,5")[IT]="";
		$("2,5").bigInt(2);
	}
	if(are($("4,1")[IT],$("3,1")[IT])&&$("3,1")[IT]!==""){
		$("4,1")[IT]="";
		$("3,1").bigInt(2);
	}
	if(are($("4,2")[IT],$("3,2")[IT])&&$("3,2")[IT]!==""){
		$("4,2")[IT]="";
		$("3,2").bigInt(2);
	}
	if(are($("4,3")[IT],$("3,3")[IT])&&$("3,3")[IT]!==""){
		$("4,3")[IT]="";
		$("3,3").bigInt(2);
	}
	if(are($("4,4")[IT],$("3,4")[IT])&&$("3,4")[IT]!==""){
		$("4,4")[IT]="";
		$("3,4").bigInt(2);
	}
	if(are($("4,5")[IT],$("3,5")[IT])&&$("3,5")[IT]!==""){
		$("4,5")[IT]="";
		$("3,5").bigInt(2);
	}
	if(are($("5,1")[IT],$("4,1")[IT])&&$("4,1")[IT]!==""){
		$("5,1")[IT]="";
		$("4,1").bigInt(2);
	}
	if(are($("5,2")[IT],$("4,2")[IT])&&$("4,2")[IT]!==""){
		$("5,2")[IT]="";
		$("4,2").bigInt(2);
	}
	if(are($("5,3")[IT],$("4,3")[IT])&&$("4,3")[IT]!==""){
		$("5,3")[IT]="";
		$("4,3").bigInt(2);
	}
	if(are($("5,4")[IT],$("4,4")[IT])&&$("4,4")[IT]!==""){
		$("5,4")[IT]="";
		$("4,4").bigInt(2);
	}
	if(are($("5,5")[IT],$("4,5")[IT])&&$("4,5")[IT]!==""){
		$("5,5")[IT]="";
		$("4,5").bigInt(2);
	}
	if(are($("6,1")[IT],$("5,1")[IT])&&$("5,1")[IT]!==""){
		$("6,1")[IT]="";
		$("5,1").bigInt(2);
	}
	if(are($("6,2")[IT],$("5,2")[IT])&&$("5,2")[IT]!==""){
		$("6,2")[IT]="";
		$("5,2").bigInt(2);
	}
	if(are($("6,3")[IT],$("5,3")[IT])&&$("5,3")[IT]!==""){
		$("6,3")[IT]="";
		$("5,3").bigInt(2);
	}
	if(are($("6,4")[IT],$("5,4")[IT])&&$("5,4")[IT]!==""){
		$("6,4")[IT]="";
		$("5,4").bigInt(2);
	}
	if(are($("6,5")[IT],$("5,5")[IT])&&$("5,5")[IT]!==""){
		$("6,5")[IT]="";
		$("5,5").bigInt(2);
	}
	if(are($("7,1")[IT],$("6,1")[IT])&&$("6,1")[IT]!==""){
		$("7,1")[IT]="";
		$("6,1").bigInt(2);
	}
	if(are($("7,2")[IT],$("6,2")[IT])&&$("6,2")[IT]!==""){
		$("7,2")[IT]="";
		$("6,2").bigInt(2);
	}
	if(are($("7,3")[IT],$("6,3")[IT])&&$("6,3")[IT]!==""){
		$("7,3")[IT]="";
		$("6,3").bigInt(2);
	}
	if(are($("7,4")[IT],$("6,4")[IT])&&$("6,4")[IT]!==""){
		$("7,4")[IT]="";
		$("6,4").bigInt(2);
	}
	if(are($("7,5")[IT],$("6,5")[IT])&&$("6,5")[IT]!==""){
		$("7,5")[IT]="";
		$("6,5").bigInt(2);
	}
	try{
		if(are($("7,"+row)[IT],$("7,"+(row+1))[IT])&&$("7,"+(row+1))[IT]!==""){
			$("7,"+(row+1))[IT]="";
			$("7,"+row).bigInt(2);
		}
		if(are($("6,"+row)[IT],$("6,"+(row+1))[IT])&&$("6,"+(row+1))[IT]!==""){
			$("6,"+(row+1))[IT]="";
			$("6,"+row).bigInt(2);
		}
		if(are($("5,"+row)[IT],$("5,"+(row+1))[IT])&&$("5,"+(row+1))[IT]!==""){
			$("5,"+(row+1))[IT]="";
			$("5,"+row).bigInt(2);
		}
		if(are($("4,"+row)[IT],$("4,"+(row+1))[IT])&&$("4,"+(row+1))[IT]!==""){
			$("4,"+(row+1))[IT]="";
			$("4,"+row).bigInt(2);
		}
		if(are($("3,"+row)[IT],$("3,"+(row+1))[IT])&&$("3,"+(row+1))[IT]!==""){
			$("3,"+(row+1))[IT]="";
			$("3,"+row).bigInt(2);
		}
		if(are($("2,"+row)[IT],$("2,"+(row+1))[IT])&&$("2,"+(row+1))[IT]!==""){
			$("2,"+(row+1))[IT]="";
			$("2,"+row).bigInt(2);
		}
		if(are($("1,"+row)[IT],$("1,"+(row+1))[IT])&&$("1,"+(row+1))[IT]!==""){
			$("1,"+(row+1))[IT]="";
			$("1,"+row).bigInt(2);
		}
	}catch(ñ){}
	try{
		if(are($("7,"+row)[IT],$("7,"+(row-1))[IT])&&$("7,"+(row-1))[IT]!==""){
			$("7,"+(row-1))[IT]="";
			$("7,"+row).bigInt(2);
		}
		if(are($("6,"+row)[IT],$("6,"+(row-1))[IT])&&$("6,"+(row-1))[IT]!==""){
			$("6,"+(row-1))[IT]="";
			$("6,"+row).bigInt(2);
		}
		if(are($("5,"+row)[IT],$("5,"+(row-1))[IT])&&$("5,"+(row-1))[IT]!==""){
			$("5,"+(row-1))[IT]="";
			$("5,"+row).bigInt(2);
		}
		if(are($("4,"+row)[IT],$("4,"+(row-1))[IT])&&$("4,"+(row-1))[IT]!==""){
			$("4,"+(row-1))[IT]="";
			$("4,"+row).bigInt(2);
		}
		if(are($("3,"+row)[IT],$("3,"+(row-1))[IT])&&$("3,"+(row-1))[IT]!==""){
			$("3,"+(row-1))[IT]="";
			$("3,"+row).bigInt(2);
		}
		if(are($("2,"+row)[IT],$("2,"+(row-1))[IT])&&$("2,"+(row-1))[IT]!==""){
			$("2,"+(row-1))[IT]="";
			$("2,"+row).bigInt(2);
		}
		if(are($("1,"+row)[IT],$("1,"+(row-1))[IT])&&$("1,"+(row-1))[IT]!==""){
			$("1,"+(row-1))[IT]="";
			$("1,"+row).bigInt(2);
		}
	}catch(ñ){}
	},cd*.7);
}
function fall(){
	for(let c=1;c<6;c++){
		if(graph_map["c"+c].c>0){
			if(graph_map["c"+c].c<graph_map["c"+c].h[0].num()){
				for(let i=1;i<7;i++){
					if($(i+","+c)[IT]==""){
						$(i+","+c)[IT]=$(i+1+","+c)[IT]
						$(i+1+","+c)[IT]=""
					}
				}
			}
		}
	}
	try{
		combine(recent_row)
		combine(recent_row)
		combine(recent_row)
		combine(recent_row+1)
		combine(recent_row-1)
		combine(recent_row+2)
		combine(recent_row-2)
		combine(recent_row+1)
		combine(recent_row-1)
		combine(recent_row+2)
		combine(recent_row-2)
		combine(recent_row+3)
		combine(recent_row-3)
		combine(recent_row)
	}catch(e){}
}
//object methods
Array.prototype.random=function(){
	return this[floor(rand()*this.length)]
}
String.prototype.num=function(){
	if(this.length>0)return parseFloat(this);
}
Element.prototype.bigInt=function(n){
	this[IT]=BigInt(this[IT]*n||1).toString()
}
//repeating
setInterval((f=0xff)=>{
	rgb.r>f&&(rgb.rg=false,rgb.r=f)
	rgb.g>f&&(rgb.gg=false,rgb.g=f)
	rgb.b>f&&(rgb.bg=false,rgb.b=f)
	rgb.r<0&&(rgb.rl=false,rgb.r=0)
	rgb.g<0&&(rgb.gl=false,rgb.g=0)
	rgb.b<0&&(rgb.bl=false,rgb.b=0)
	rgb.r==f&&rgb.g==0&&rgb.b==0&&(rgb.gg=true)
	rgb.r==f&&rgb.g==f&&rgb.b==0&&(rgb.rl=true)
	rgb.r==0&&rgb.g==f&&rgb.b==0&&(rgb.bg=true)
	rgb.r==0&&rgb.g==f&&rgb.b==f&&(rgb.gl=true)
	rgb.r==0&&rgb.g==0&&rgb.b==f&&(rgb.rg=true)
	rgb.r==f&&rgb.g==0&&rgb.b==f&&(rgb.bl=true)
	rgb.rg&&(rgb.r+=rgb.step)
	rgb.gg&&(rgb.g+=rgb.step)
	rgb.bg&&(rgb.b+=rgb.step)
	rgb.rl&&(rgb.r-=rgb.step)
	rgb.gl&&(rgb.g-=rgb.step)
	rgb.bl&&(rgb.b-=rgb.step)
	scheme["4503599627370496"]=rgb.fetch("rrr")
	scheme["9007199254740992"]=rgb.fetch("ggg")
	scheme["18014398509481984"]=rgb.fetch("bbb")
	scheme["36028797018963968"]=rgb.fetch("rgb")
	scheme["72057594037927936"]=rgb.fetch("grb")
	scheme["144115188075855872"]=rgb.fetch("brg")
	scheme["288230376151711744"]=rgb.fetch("rbg")
	scheme["576460752303423488"]=rgb.fetch("gbr")
	scheme["1152921504606846976"]=rgb.fetch("bgr")
	scheme["2305843009213693952"]=rgb.fetch("rrb")
	scheme["4611686018427387904"]=rgb.fetch("rbr")
	scheme["9223372036854775808"]=rgb.fetch("grg")
	scheme["18446744073709551616"]=rgb.fetch("bgb")
	scheme["36893488147419103232"]=rgb.fetch("rgr")
	scheme["73786976294838206464"]=rgb.fetch("gbg")
	scheme["147573952589676412928"]=rgb.fetch("brb")
	graph_map={
		c1:{c:0,h:null},
		c2:{c:0,h:null},
		c3:{c:0,h:null},
		c4:{c:0,h:null},
		c5:{c:0,h:null}
	};
	for(let i=1;i<6;i++){
		["7,"+i,"6,"+i,"5,"+i,"4,"+i,"3,"+i,"2,"+i,"1,"+i].forEach(e=>{
			$(e)[IT].length>0&&(graph_map["c"+i].c++,graph_map["c"+i].h=highest(i));
			$(e).style[BGC]=scheme[$(e)[IT]]
			let cbg=$(e).style[BGC].split("(")[1].split(")")[0].split(", ");
			((cbg[0]*0.299+cbg[1]*0.587+cbg[2]*0.114)>contrast)?($(e).style["color"]="#000"):($(e).style["color"]="#fff")
		});
	}
});
setInterval(()=>{
	$("next").style[BGC]=scheme[$("next")[IT]]
	let cbg=$("next").style[BGC].split("(")[1].split(")")[0].split(", ");
	$("next").style["color"]=((cbg[0]*0.299+cbg[1]*0.587+cbg[2]*0.114)>contrast)?"#000":"#fff"
	fall()
},50);
reset()
		</script>
	</body>
</html>